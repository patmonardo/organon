# FOUNDATION-COMPILER-V2-WORKBOOK

Status: Scaffold workbook (translation in progress)
Doctrine scope: Identity / Difference / Contradiction
Primary source texts: `identity.txt`, `difference.txt`, `contradiction.txt`

## Purpose

Establish the generator-first contract for Foundation so compiler modules can be derived from workbook logic when translation is complete.

## Current stance

- Foundation source translation is not yet final.
- This workbook defines stable contract surfaces now.
- Semantic details can be tightened incrementally as translation matures.

## Non-negotiable boundary

- Reflection compiler layer handles validity paths.
- It does not perform scientific-causal judgment.

## Reflection architecture principle

Foundation starts from this presupposition:

- A determination of reflection presupposes a determining reflective consciousness.
- Logical law here is reflection-architectural, not content-empty formalism.
- Identity, Difference, and Contradiction are treated as determinate movements of reflective activity.

Terminology note:

- In this Foundation section, treat reflection architecture as a **principle** (methodic orientation), not as an isolated axiom.
- Reserve explicit axiomatic status for downstream Entity/Spectral theory where invariant law-sets are fixed.

Method note:

- Morphology here is dialectical and determinate, not mathematical-algebraic.
- Development proceeds from given concepts and their reflective determinations.
- Mathematical-style axioms presupposing constructed intuition are out of scope for Reflection theory at this stage.

## Foundation algebra contract

### Determination triad

- `Identity`
- `Difference`
- `Contradiction`

### Difference decomposition (for contract use)

- `Absolute` (relation-bearing)
- `Diversity` (functional branching)
- `Opposition` (operator-bearing transition)

### Core edges

- `NEGATES`, `SUBLATES`, `MEDIATES`, `REFLECTS`, `NEXT`
- Validity edges: `VALID_IN`, `SUPPORTED_BY`, `CONDITIONED_BY`, `REJECTED_BY`

## Best-of inherited patterns (from legacy compiler/generator)

1. Keep Shape/Definition boundary explicit.
2. Preserve deterministic IDs and provenance on all emitted artifacts.
3. Compile through explicit state guards and typed records.
4. Validate envelopes before emission.
5. Preserve directional Fact -> Relation -> Knowledge flow.

## Language policy (readability-first)

- Prolog contributes ideas only (predicate/constraint semantics).
- Foundation workbook contracts are authored in **Scheme-Python style**:
  - composable transforms,
  - explicit records,
  - readable functional flow,
  - low-symbol syntax.
- Prefer maintainable transformation pipelines over clause-heavy syntax.

## Generator logic contract (Foundation)

Generator must:

1. Build chunk graph from source/topic-map pairs.
2. Produce deterministic traces across identity/difference/contradiction progression.
3. Emit determination-role labeling for each chunk/state.
4. Generate candidate judgments with explicit evidence.
5. Emit rejection records for unsatisfied candidates.

Required conceptual outputs:

- `foundationChunkGraph`
- `foundationTraceGraph`
- `determinationContexts`
- `candidateJudgments`
- `survivingJudgments`
- `blessedFacts`
- `rejections`

## Relations regeneration (must happen first)

Foundation compiler generation is blocked until relation regeneration pass is complete.

### Required relation set (Foundation)

- `REFLECTS` (identity/difference/contradiction movement)
- `NEGATES` (difference/opposition operations)
- `SUBLATES` (contradiction resolution)
- `MEDIATES` (handoff and grounding links)
- `NEXT` (deterministic sequence links)

### Pass discipline

1. Regenerate relations from `identity.txt`, `difference.txt`, `contradiction.txt` chunks.
2. Keep first pass source-anchored and line-evidenced.
3. Hold speculative/second-order links as `review_pending`.
4. Freeze relation IDs only after translation checkpoints are accepted.

### Gate

- [ ] `FOUNDATION_RELATIONS_REGENERATED_V2`
- [ ] `FOUNDATION_RELATIONS_REVIEWED`
- [ ] `FOUNDATION_RELATION_IDS_FROZEN`

## Compiler derivation contract

Compilers derived from this workbook must:

1. Preserve determination kind (`identity|difference|contradiction`).
2. Preserve provenance and state-key stability.
3. Materialize only survivable judgments into facts/shapes.
4. Emit record views indexed by typed foundation state IDs.

## Rejection taxonomy (mandatory)

- `RJ_GENESIS_UNSAT`
- `RJ_MORPH_ADMISSIBILITY_FAIL`
- `RJ_CONTEXT_INVALID`
- `RJ_PATH_BROKEN`
- `RJ_CONTRADICTION_UNRESOLVED`
- `RJ_GROUND_MISSING`

Each rejection includes:

- `candidateId`
- `code`
- `phase`
- `evidence[]`
- `explanation`

## Translation-ready TODOs

- [ ] Foundation relations regenerated and frozen.
- [ ] Confirm final chunk boundaries in all three source texts.
- [ ] Lock trace heuristics for Difference substructure.
- [ ] Lock contradiction-to-ground handoff criteria.
- [ ] Freeze compile derivation templates.
